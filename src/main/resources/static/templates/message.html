<style>
    div.msg-wrapper-md {
        padding: 1px 0px 0px 0px;
    }

    .pagination > .disabled > span,
    .pagination > .disabled > span:hover,
    .pagination > .disabled > span:focus,
    .pagination > .disabled > a,
    .pagination > .disabled > a:hover,
    .pagination > .disabled > a:focus {
        cursor: default;
    }

</style>
<!--顶部信息-->
<toaster-container
        toaster-options="{'position-class':'toast-bottom-right','time-out': 1500,'limit':1, 'close-button':true, 'animation-class': 'toast-top-center'}"></toaster-container>
<div class="msg-wrapper-md" ng-controller="msgCtrl">
    <p class="m-b-md"></p>
    <tabset class="tab-container">
        <tab active="tab1" ng-controller="alarmCtrl" ng-click="changeTab(1)">
            <tab-heading>
                <img src="function/message/img/icon_m3.png"/>
                <div style="margin: 2px;padding-top: 5px;" class="text-center">
                    告警
                    <span class="badge bg-danger  badge-sm m-l-xs">{{totalAlarmRecords}}</span>
                </div>
            </tab-heading>
            <div class="msg-wrapper-md ng-scope">
                <div class="panel panel-default">
                    <div class="panel-heading" style="float: left"> 设备告警列表</div>
                    <div class="panel-heading text-right">
                        <i class="glyphicon glyphicon-trash " style="cursor: pointer"></i>
                        <span ng-click="alarmDelete()" style="cursor:pointer;">删除</span>
                    </div>
                    <div>
                        <table data-page-size="5" data-filter="#filter" ui-jq="footable"
                               class="table m-b-none  table-hover defaultdefault footable-loaded footable">
                            <thead>
                            <tr style="">
                                <th rowspan="2" class="text-left" style="width:20px;">
                                    <label class="i-checks i-checks-sm ">
                                        <input type="checkbox" ng-model="allChecked" ng-change="checkAll(allChecked)">
                                        <i></i>
                                    </label>
                                </th>
                                <th rowspan="2" class="text-left" style="vertical-align:top;"> 告警信息</th>
                                <th rowspan="2" class="text-left" style="vertical-align:top;"> 信息类型</th>
                                <th rowspan="2" class="text-right"></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr style="display: table-row;" class="footable-even" ng-repeat="alarm in alarms"
                                ng-click="getControlInfo(alarm)">
                                <td class="text-left" style="width:20px;">
                                    <label class="i-checks i-checks-sm ">
                                        <input type="checkbox" ng-model="alarm.$checked"/>
                                        <i></i>
                                    </label>
                                </td>
                                <td class="footable-visible footable-first-column">
                      <span class="footable-toggle">
                        {{alarm.message | cut:true:200:' ...'}}
                      </span>
                                </td>
                                <td class="footable-visible footable-first-column">
                      <span class="footable-toggle">
                        {{alarm.type ==1 ? '公告消息' : (alarm.type ==2 ? '设备消息':(alarm.type ==3 ? '产品消息':(alarm.type ==4 ? '安全消息':(alarm.type ==5 ? '服务消息':'故障消息'))))}}
                      </span>
                                </td>
                                <td class="text-right">
                                    <div class="common-set-camera-top-edit" style="cursor: pointer">
                                        <i class="icon-paste  "></i>
                                        <span ng-click="seeAlarmInfo(alarm)">查看明细</span>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="text-left">
                    <pagination class="pagination-sm" ng-model="pageInfo.currentPage" num-pages="numPages"
                                total-items="pageInfo.totalRecord" max-size="8" items-per-page="pageInfo.pageSize"
                                ng-change="reloadData();" previous-text="上一页" next-text="下一页" first-text="首页"
                                last-text="末页" boundary-links="true"></pagination>
                </div>
            </div>
        </tab>
        <tab active="tab2" ng-controller="exceptionCtrl" ng-click="changeTab(2)">
            <tab-heading>
                <img src="function/message/img/icon_m1.png"/>
                <div style="margin: 2px;padding-top: 5px;color: #666" class="text-center">
                    设备异常
                    <span class="badge bg-danger  badge-sm m-l-xs">{{messageall.exception}}</span>
                </div>
            </tab-heading>
            <ul class="list-group no-borders pull-in m-b-none">
                <li class="list-group-item   " ng-repeat="z in allexception">
                    <a href="#" class="h4 text-primary m-b-sm m-t-sm block">{{z.deviceid}}</a>
                    <p style=" padding:10px 0px 0px 10px">
                        {{z.information}}
                    </p>
                    <p>
              <span class="label bg-primary pos-rlt m-r inline wrapper-xs"> <i class="arrow right arrow-primary"></i>
                {{z.level}}:
              </span>
                        <a href class="m-r-sm">{{z.value}}</a>
                        <a href>{{z.valve}}</a>
                    </p>
                </li>
            </ul>
            <pagination class="pagination-sm text-left" ng-model="pageInfo.currentPage" num-pages="numPages"
                        total-items="pageInfo.totalRecord" max-size="8" items-per-page="pageInfo.pageSize"
                        ng-change="reloadData();" previous-text="上一页" next-text="下一页" first-text="首页" last-text="末页"
                        boundary-links="true"></pagination>
        </tab>
        <tab active="tab3" ng-click="changeTab(3)">
            <tab-heading>
                <img src="function/message/img/icon_m2.png"/>
                <div style="margin: 2px;padding-top: 5px;color: #666" class="text-center">
                    待办任务
                    <span class="badge bg-danger  badge-sm m-l-xs">{{messageall.mission}}</span>
                </div>
            </tab-heading>
            <div class="msg-wrapper-md ng-scope">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <span class="label bg-danger pull-right m-t-xs">4 left</span>
                        任务列表
                    </div>
                    <table class="table table-striped m-b-none   ">
                        <thead>
                        <tr>
                            <th style="width:60%;">进度</th>
                            <th>任务名称</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <div class="progress progress-sm progress-striped active m-t-xs m-b-none">
                                    <div style="width: 80%" data-original-title="80%" data-toggle="tooltip"
                                         class="progress-bar bg-success"></div>
                                </div>
                            </td>
                            <td>任务一</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="progress progress-xs m-t-xs m-b-none">
                                    <div style="width: 40%" data-original-title="40%" data-toggle="tooltip"
                                         class="progress-bar bg-info"></div>
                                </div>
                            </td>
                            <td>任务二</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="progress progress-xs m-t-xs m-b-none">
                                    <div style="width: 20%" data-original-title="20%" data-toggle="tooltip"
                                         class="progress-bar bg-warning"></div>
                                </div>
                            </td>
                            <td>任务三</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="progress progress-xs m-t-xs m-b-none">
                                    <div style="width: 15%" data-original-title="15%" data-toggle="tooltip"
                                         class="progress-bar bg-danger"></div>
                                </div>
                            </td>
                            <td>任务四</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="text-left">
                    <pagination class="pagination-sm" ng-model="pageInfo.currentPage" num-pages="numPages"
                                total-items="pageInfo.totalRecord" max-size="8" items-per-page="pageInfo.pageSize"
                                ng-change="reloadData();" previous-text="上一页" next-text="下一页" first-text="首页"
                                last-text="末页" boundary-links="true"></pagination>
                </div>
            </div>
        </tab>
        <tab ng-controller="messageCtrl" active="tab4" ng-click="changeTab(4)">
            <tab-heading>
                <img src="function/message/img/icon_m4.png"/>
                <div style="margin: 2px;padding-top: 5px;color: #666" class="text-center">
                    用户消息
                    <span class="badge bg-danger  badge-sm m-l-xs">{{messageall.message}}</span>
                </div>
            </tab-heading>
            <ul class="list-group list-group-lg no-borders pull-in m-b-none">
                <li class="list-group-item" ng-repeat="x in allmessage">
                    <a href="javascript:void(0)" class="h4 text-primary m-b-sm block">{{ x.msgtitle}}</a>
                    <p class="b   pos-rlt bg-light r r-2x " style="  padding: 10px 5px 10px 15px;">
                        <span class="arrow top pull-left arrow-light"></span>
                        {{ x.msgcontent}}
                    </p>
                    {{x.msgdate | date:'yyyy-MM-dd' }}
                </li>
            </ul>
            <pagination class="pagination-sm text-left" ng-model="pageInfo.currentPage" num-pages="numPages"
                        total-items="pageInfo.totalRecord" max-size="8" items-per-page="pageInfo.pageSize"
                        ng-change="reloadData();" previous-text="上一页" next-text="下一页" first-text="首页" last-text="末页"
                        boundary-links="true"></pagination>
        </tab>

    </tabset>
</div>

